<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Casino Analytics</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>Casino Analytics</h1>
            </div>
            <nav class="sidebar-nav">
                <button class="nav-item active" data-view="dashboard">
                    <span class="nav-icon">▣</span> Dashboard
                </button>
                <button class="nav-item" data-view="casinos">
                    <span class="nav-icon">◈</span> Casinos
                </button>
                <button class="nav-item" data-view="insights">
                    <span class="nav-icon">◆</span> Insights
                </button>
            </nav>
            <div class="sidebar-footer">
                <button id="darkModeBtn" class="icon-btn" title="Toggle theme">◐</button>
                <button id="densityBtn" class="icon-btn" title="Display settings">⚙</button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard View -->
            <div id="dashboardView" class="view active">
                <div class="view-header">
                    <h2>Dashboard</h2>
                    <div class="actions">
                        <button id="addCasinoBtn" class="btn btn-secondary">+ New Casino</button>
                        <button id="addTransactionBtn" class="btn btn-primary">+ Transaction</button>
                    </div>
                </div>

                <!-- Key Metrics -->
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">Total Profit</div>
                        <div class="metric-value profit" id="metricProfit">$0</div>
                        <div class="metric-change" id="metricProfitChange"></div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Total Deposited</div>
                        <div class="metric-value" id="metricDeposited">$0</div>
                        <div class="metric-change" id="metricDepositedChange"></div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Total Redeemed</div>
                        <div class="metric-value" id="metricRedeemed">$0</div>
                        <div class="metric-change" id="metricRedeemedChange"></div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">ROI</div>
                        <div class="metric-value" id="metricROI">0%</div>
                        <div class="metric-change" id="metricROIChange"></div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Active Casinos</div>
                        <div class="metric-value" id="metricActive">0</div>
                        <div class="metric-info">with transactions</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Profitable Casinos</div>
                        <div class="metric-value positive" id="metricProfitable">0</div>
                        <div class="metric-info" id="metricProfitablePercent">0%</div>
                    </div>
                </div>

                <!-- Charts Row 1 -->
                <div class="charts-row">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Top 10 Profitable Casinos</h3>
                        </div>
                        <div id="topCasinosChart" class="chart"></div>
                    </div>
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Bottom 10 Losing Casinos</h3>
                        </div>
                        <div id="bottomCasinosChart" class="chart"></div>
                    </div>
                </div>

                <!-- Charts Row 2 -->
                <div class="charts-row">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>ROI Distribution</h3>
                        </div>
                        <div id="roiDistributionChart" class="chart"></div>
                    </div>
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Profit vs Loss Breakdown</h3>
                        </div>
                        <div id="profitLossChart" class="chart"></div>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="stats-row">
                    <div class="stat-card">
                        <h3>Performance Breakdown</h3>
                        <div id="performanceBreakdown"></div>
                    </div>
                    <div class="stat-card">
                        <h3>Top Opportunities</h3>
                        <div id="topOpportunities"></div>
                    </div>
                    <div class="stat-card">
                        <h3>Risk Analysis</h3>
                        <div id="riskAnalysis"></div>
                    </div>
                </div>
            </div>

            <!-- Casinos View -->
            <div id="casinosView" class="view">
                <div class="view-header">
                    <h2>Casinos</h2>
                    <div class="actions">
                        <input type="text" id="searchInput" placeholder="Search..." class="search-input compact">
                        <select id="filterSelect" class="filter-select compact">
                            <option value="all">All</option>
                            <option value="positive">Profitable</option>
                            <option value="negative">Losing</option>
                            <option value="zero">Break Even</option>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                        <button id="sortBtn" class="btn btn-secondary compact">Sort: Profit ↓</button>
                    </div>
                </div>

                <div class="table-wrapper">
                    <table id="casinoTable" class="data-table">
                        <thead>
                            <tr>
                                <th class="sortable" data-sort="site">Casino</th>
                                <th>Link</th>
                                <th class="sortable number" data-sort="deposited">Deposited</th>
                                <th class="sortable number" data-sort="redeemed">Redeemed</th>
                                <th class="sortable number" data-sort="profit">Profit</th>
                                <th class="sortable number" data-sort="roi">ROI</th>
                                <th class="number">Transactions</th>
                                <th>Notes</th>
                                <th class="actions-col">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Insights View -->
            <div id="insightsView" class="view">
                <div class="view-header">
                    <h2>Insights & Recommendations</h2>
                </div>

                <div id="insightsContainer" class="insights-container"></div>
            </div>
        </main>
    </div>

    <!-- Add Casino Modal -->
    <div id="addCasinoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Casino</h2>
                <button class="close-btn" data-modal="addCasinoModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addCasinoForm">
                    <div class="form-group">
                        <label for="newCasinoName">Casino Name *</label>
                        <input type="text" id="newCasinoName" required>
                    </div>
                    <div class="form-group">
                        <label for="newCasinoUrl">Website URL</label>
                        <input type="url" id="newCasinoUrl" placeholder="https://example.com">
                    </div>
                    <div class="form-group">
                        <label for="newCasinoDeposited">Initial Deposited Amount</label>
                        <input type="number" id="newCasinoDeposited" step="0.01" value="0">
                    </div>
                    <div class="form-group">
                        <label for="newCasinoRedeemed">Initial Redeemed Amount</label>
                        <input type="number" id="newCasinoRedeemed" step="0.01" value="0">
                    </div>
                    <div class="form-group">
                        <label for="newCasinoNotes">Notes</label>
                        <textarea id="newCasinoNotes" rows="2"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" data-modal="addCasinoModal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Add Casino</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Transaction Modal -->
    <div id="transactionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add Transaction</h2>
                <button class="close-btn" data-modal="transactionModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="transactionForm">
                    <div class="form-group">
                        <label for="casinoSelect">Casino *</label>
                        <select id="casinoSelect" required></select>
                    </div>
                    <div class="form-group">
                        <label for="transactionType">Type *</label>
                        <select id="transactionType" required>
                            <option value="deposit">Deposit</option>
                            <option value="redemption">Redemption</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="transactionAmount">Amount (USD) *</label>
                        <input type="number" id="transactionAmount" step="0.01" min="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="transactionDate">Date</label>
                        <input type="date" id="transactionDate">
                    </div>
                    <div class="form-group">
                        <label for="transactionNote">Note</label>
                        <textarea id="transactionNote" rows="2"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" data-modal="transactionModal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Add Transaction</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Casino Modal -->
    <div id="editCasinoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Casino</h2>
                <button class="close-btn" data-modal="editCasinoModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editCasinoForm">
                    <input type="hidden" id="editCasinoIndex">
                    <div class="form-group">
                        <label for="editCasinoName">Casino Name</label>
                        <input type="text" id="editCasinoName" required>
                    </div>
                    <div class="form-group">
                        <label for="editCasinoUrl">Website URL</label>
                        <input type="url" id="editCasinoUrl">
                    </div>
                    <div class="form-group">
                        <label for="editCasinoNotes">Notes</label>
                        <textarea id="editCasinoNotes" rows="3"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-danger" id="deleteCasinoBtn">Delete Casino</button>
                        <div style="flex: 1"></div>
                        <button type="button" class="btn btn-secondary" data-modal="editCasinoModal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Density Settings Modal -->
    <div id="densityModal" class="modal">
        <div class="modal-content small">
            <div class="modal-header">
                <h2>Display Settings</h2>
                <button class="close-btn" data-modal="densityModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="setting-group">
                    <label>Table Density</label>
                    <div class="radio-group">
                        <label><input type="radio" name="density" value="comfortable" checked> Comfortable</label>
                        <label><input type="radio" name="density" value="compact"> Compact</label>
                        <label><input type="radio" name="density" value="dense"> Dense</label>
                    </div>
                </div>
                <div class="setting-group">
                    <label>Theme</label>
                    <div class="radio-group">
                        <label><input type="radio" name="theme" value="light"> Light</label>
                        <label><input type="radio" name="theme" value="dark" checked> Dark</label>
                        <label><input type="radio" name="theme" value="auto"> Auto</label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
